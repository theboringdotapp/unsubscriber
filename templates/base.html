<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Gmail Unsubscriber{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* GitHub Dark Dimmed Inspired Palette (Approximation) */
        :root {
            --bg-primary: #22272e; /* Dark background */
            --bg-secondary: #2d333b; /* Slightly lighter surface */
            --border-color: rgba(255, 255, 255, 0.15);
            --text-primary: #adbac7; /* Primary text */
            --text-secondary: #768390; /* Secondary text */
            --accent-color: #809fff; /* Accent blue/purple */
            --accent-hover: #a3b8ff;
            --glass-bg: rgba(128, 159, 255, 0.1); /* Accent at 10% */
            --glass-bg-hover: rgba(128, 159, 255, 0.2); /* Accent at 20% */
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-border-hover: rgba(255, 255, 255, 0.3);
        }

        /* Simple spinner styles - Updated Color */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1); /* Lighter border */
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border-left-color: var(--accent-color); /* Use accent color */
            animation: spin 1s ease infinite;
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .hidden { display: none; }

        /* Glassmorphism Button Style */
        .glass-button {
            background-color: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px); /* Safari support */
            border: 1px solid var(--glass-border);
            color: var(--accent-color);
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, color 0.2s ease-in-out;
            /* Combine with Tailwind classes for padding, rounding, font size etc. */
        }
        .glass-button:hover {
            background-color: var(--glass-bg-hover);
            border-color: var(--glass-border-hover);
            color: var(--accent-hover);
        }
        .glass-button:disabled {
             opacity: 0.6;
             cursor: not-allowed;
        }

        /* Apply base colors */
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }
        nav, footer, .card-bg { /* Add card-bg class for content cards */
            background-color: var(--bg-secondary);
        }
        nav, footer {
            border-bottom: 1px solid var(--border-color);
            border-top: 1px solid var(--border-color); /* Add top border for footer consistency */
        }
        /* Adjust link colors if needed */
        a { color: var(--accent-color); }
        a:hover { color: var(--accent-hover); }

        /* Clickable Table Row Style */
        .clickable-row {
            cursor: pointer;
        }

    </style>
    {% block head_extra %}{% endblock %}
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navigation Bar -->
    <nav class="shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <span class="text-2xl">âœ¨</span> <!-- Adjusted logo color implicitly via body style -->
                    <span class="ml-3 font-semibold text-xl text-gray-100">Gmail Unsubscriber</span> <!-- Make title lighter -->
                </div>
                <div class="flex items-center">
                    {% if authenticated %}
                        <a href="{{ url_for('login') }}" class="glass-button font-bold py-2 px-4 rounded text-sm">
                            Logout / Re-Auth
                        </a>
                    {% else %}
                         <a href="{{ url_for('login') }}" class="glass-button font-bold py-2 px-4 rounded text-sm">
                             Login with Google
                         </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Flash Messages (Adjust styling for dark theme) -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="mb-6 space-y-3">
                {% for category, message in messages %}
                    {% set alert_class = 'bg-blue-900 border-blue-700 text-blue-300' %}
                    {% if category == 'success' %}
                        {% set alert_class = 'bg-green-900 border-green-700 text-green-300' %}
                    {% elif category == 'error' %}
                        {% set alert_class = 'bg-red-900 border-red-700 text-red-300' %}
                    {% elif category == 'warning' %}
                         {% set alert_class = 'bg-yellow-900 border-yellow-700 text-yellow-300' %}
                    {% endif %}
                    <div class="border-l-4 p-4 {{ alert_class }} rounded-r-md" role="alert"> <!-- Added rounding -->
                        <p>{{ message }}</p>
                    </div>
                {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- Content Block -->
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="mt-auto">
        <div class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-400">
            Simple Unsubscriber MVP
        </div>
    </footer>

    <!-- Global JS -->
    <script>
        // Updated setLoading to handle glass buttons
        function setLoading(buttonId, loadingText = 'Processing...') {
            const button = document.getElementById(buttonId);
            if (button) {
                button.disabled = true;
                // Store original content if needed, e.g., button.dataset.originalContent = button.innerHTML;
                button.innerHTML = `<span class="spinner"></span><span class="ml-2">${loadingText}</span>`;
                // Add a class to signify loading state if needed for more specific styling
                button.classList.add('is-loading');
            }
        }
        // function hideLoading(buttonId) { ... restore original content ...}
    </script>
    {% block scripts %}{% endblock %}

    <!-- Fixed Action Bar Placeholder -->
    <div id="fixed-action-bar" class="hidden fixed bottom-0 left-0 right-0 card-bg border-t border-[var(--border-color)] shadow-lg z-50">
        <!-- Content will be added by scan_results.html -->
    </div>

</body>
</html> 